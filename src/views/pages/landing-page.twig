{#
| Variable     | Type                  | Description |
|--------------|-----------------------|-------------|
| page         | Page                  |             |
| page.title   | string                |             |
| page.content | string                |             |
| page.url     | string                |             |
| page.slug    | string                |             |
#}
{% extends "layouts.master" %}
{% block content %}

    {# ======================== Landing Page ======================== #}
    {% if landing and landing.settings.sale_counter_time and landing.offer_expired_at is not null %}
        <div class="landing-page">
            <header>
                <div class="header-content container">
                    <img src="{{ store.logo }}" alt="logo" class="logo">
                    <div class="header-content-inner">
                        <h1>{{ landing.title }}</h1>
                        <p>{{ landing.content|replace({"&nbsp;":" "})|raw }}</p>
                    </div>
                    {% if landing.discount %}
                        <div class="header-content-offer">
                            <p>وفر {{ landing.discount|money }}</p>
                            {% if landing.settings.sale_counter_time and landing.offer_expired_at %}
                                <h3>المتبقي من العرض</h3>
                                <ul id="countdown_id" class="timer countdown-timer mt-30" data-dunixtime="{{ landing.offer_expired_at }}"></ul>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>
            </header>

            <section class="s-block container overflow-hidden">
                {% if landing.settings.show_product_as_slider %}
                    <salla-slider
                            type="carousel"
                            block-title="المنتجات المعروضة"
                            id="landing-page-slider">
                        <div slot="items">
                            {% for product in landing.products %}
                                <div class="slide--one-fourth">
                                    {% include 'pages.partials.product.landing-card' %}
                                </div>
                            {% endfor %}
                        </div>
                    </salla-slider>
                {% else %}
                    <salla-infinite-scroll
                            next-page="{{ landing.products.next_page }}"
                            autoload
                            class="mb-8 products-container gird-view grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2.5 sm:gap-4 md:gap-6">
                        {% for product in landing.products %}
                            {% include 'pages.partials.product.landing-card' %}
                        {% endfor %}
                    </salla-infinite-scroll>
                {% endif %}

                <div class="text-center mt-6">
                    <salla-button color="primary" class="btn--rounded-full !text-white">{{ landing.products|length > 1 ? 'شراء الكل الآن' : 'شراء الآن' }}</salla-button>
                </div>
            </section>

            {% if landing.settings.show_store_features %}
                <section  class="s-block container overflow-hidden">
                    {% include 'components.home.store-features' with {
                        items:[
                            {icon:'sicon-shipping', title:'شحن مجاني', text:'مدفوعات آمنة أقساط تصل إلى 12 شهرًا'},
                            {icon:'sicon-sync', title:'إسترجاع خلال 14 يومًا', text:'مدفوعات آمنة أقساط تصل إلى 12 شهرًا'},
                            {icon:'sicon-secure-credit-card-2', title:'مدفوعات آمنة', text:'مدفوعات آمنة أقساط تصل إلى 12 شهرًا'},
                        ]
                    } %}
                </section>
            {% endif %}

            {% if landing.settings.customer_feedback_type is not null %}
                <section class="s-block overflow-hidden bg-gray-50">
                    <div class="container">
                        {% component 'home.testimonials' %}
                    </div>
                </section>
            {% endif %}
        </div>
    {% endif %}

    {# ======================== Not Found ======================== #}
    {% if landing is null %}
        <div class="landing-page notfound">
            <header>
                <div class="header-content container">
                    <img src="{{ store.logo }}" alt="logo" class="logo">
                    <div class="header-content-inner">
                        <h1> هذه الصفحة لم تعد موجودة</h1>
                        <div class="text-center mt-6">
                            <salla-button color="primary" class="btn--rounded-full !text-white">العودة للمتجر</salla-button>
                        </div>
                    </div>
                </div>
            </header>
        </div>
    {% endif %}

    {# ======================== Expired ======================== #}
    {% if landing and landing.settings.sale_counter_time and landing.offer_expired_at is null %}
        <div class="landing-page expired">
            <header>
                <div class="header-content container">
                    <img src="{{ store.logo }}" alt="logo" class="logo">
                    <div class="header-content-inner">
                        <h1> انتهت صلاحية العرض</h1>
                        <p>نأسف لكن مدة صلاحية هذا العرض قد انتهت، يمكنك تصفح بقية منتجاتنا ستجد الكثير من المنتجات المميزة والعروض الاخرى.</p>
                        <div class="text-center mt-6">
                            <salla-button color="primary" class="btn--rounded-full !text-white">العودة للمتجر</salla-button>
                        </div>
                    </div>
                </div>
            </header>
        </div>
    {% endif %}

{% endblock %}

{% block scripts %}
    <script defer src="{{ 'landing.js' | asset }}"></script>
{% endblock %}